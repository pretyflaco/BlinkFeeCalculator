Below is a cleaned-up version of the instructions with clear sections, bullet lists, and properly formatted formulas:

---

## 1. Display and Tier Renaming

- Change the fee display from a decimal format (e.g., 0.00000000) to a satoshi display.
- Rename tiers as follows:  
  - "Fastest" → **Priority**  
  - "Half Hour" → **Standard**  
  - "Hour" → **Slow**

---

## 2. Fee Calculation Based on Payment Amount

Use the payment amount (in satoshis) to determine the number of inputs and outputs for fee calculation:

- For payment_amount between 1 sat and 499,999 sat:  
  Use **1 input** and **2 outputs**.

- For payment_amount between 500,000 sat and 2,999,999 sat:  
  Use **2 inputs** and **2 outputs**.

- For payment_amount between 3,000,000 sat and 9,999,999 sat:  
  Use **3 inputs** and **2 outputs**.

- For payment_amount between 10,000,000 sat and 21,999,999 sat:  
  Use **4 inputs** and **2 outputs**.

- For payment_amount between 22,000,000 sat and 69,999,999 sat:  
  Use **5 inputs** and **2 outputs**.

- For payment_amount of 70,000,000 sat and above:  
  Use **6 inputs** and **2 outputs**.

---

## 3. Blink Fee Calculation

The Blink Fee (formerly the Estimated Fee) is calculated as follows:

\[
\text{fee\_in\_sats} = \text{payment\_amount} \times \text{fee\_percentage} + \text{payment\_cost\_to\_bank} \times \text{base\_fee\_multiplier}
\]

---

## 4. Fee Percentage Calculations

The fee percentage depends on the fee preference. We have different formulas for Priority, Standard, and Slow tiers.

### 4.1. Priority Tier

- **Fee Percentage Formula:**

\[
\text{fee\_percentage} = \text{exp\_decay1} + \left(\frac{\text{FastestFee} - 1}{2000 - 1}\right) \times (0.5\% - \text{exp\_decay1})
\]

- **exp_decay1 Calculation:**

\[
\text{exp\_decay1} =
\begin{cases}
0.01 + (0.04 - 0.01) \times \exp\left(-\frac{\text{payment\_amount} - 21000}{4000000 - 21000} \times 21\right), & \text{if } \text{payment\_amount} < 4000000 \\
\frac{40000}{\text{payment\_amount}}, & \text{if } \text{payment\_amount} \ge 4000000
\end{cases}
\]

---

### 4.2. Standard Tier

- **Fee Percentage Formula:**

\[
\text{fee\_percentage} = \text{exp\_decay2} + \left(\frac{\text{hourFee} - 1}{2000 - 1}\right) \times (0.25\% - \text{exp\_decay2})
\]

- **exp_decay2 Calculation:**

\[
\text{exp\_decay2} =
\begin{cases}
0.00625 + (0.03 - 0.00625) \times \exp\left(-\frac{\text{payment\_amount} - 21000}{4000000 - 21000} \times 21\right), & \text{if } \text{payment\_amount} < 4000000 \\
\frac{25000}{\text{payment\_amount}}, & \text{if } \text{payment\_amount} \ge 4000000
\end{cases}
\]

---

### 4.3. Slow Tier

- **Fee Percentage Formula:**

\[
\text{fee\_percentage} = \text{exp\_decay3} + \left(\frac{\text{economyFee} - 1}{2000 - 1}\right) \times (0.1\% - \text{exp\_decay3})
\]

- **exp_decay3 Calculation:**

\[
\text{exp\_decay3} =
\begin{cases}
0.00375 + (0.02 - 0.00375) \times \exp\left(-\frac{\text{payment\_amount} - 21000}{4000000 - 21000} \times 21\right), & \text{if } \text{payment\_amount} < 4000000 \\
\frac{15000}{\text{payment\_amount}}, & \text{if } \text{payment\_amount} \ge 4000000
\end{cases}
\]

---

## 5. Payment Cost to Bank Calculation

For PWPKH transactions, the byte sizes are:

- Base size: 11 bytes  
- P2WPKH input size: 68 bytes  
- P2WPKH output size: 31 bytes  

The payment cost to bank is calculated as:

\[
\text{payment\_cost\_to\_bank} = \text{base\_size} + (\text{number of inputs} \times \text{input\_size}) + (\text{number of outputs} \times \text{output\_size})
\]

---

## 6. Base Fee Multiplier Calculation

The base fee multiplier depends on the tier:

- **For Priority Tier 1:**

\[
\text{base\_fee\_multiplier} = \frac{2}{\text{FastestFee}} + 1.3
\]

- **For Standard Tier 2:**

\[
\text{base\_fee\_multiplier} = \frac{1}{\text{hourFee}} + 1.1
\]

- **For Slow Tier 3:**

\[
\text{base\_fee\_multiplier} = \frac{2}{\text{economyFee}} + 1.1
\]

---

This version should be directly consumable and parsable by the Replit Agent.